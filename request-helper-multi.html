<link rel="import" href="request-helper.html">

<script>
  'use strict';

  const RequestHelperMulti = (baseClass) => class extends RequestHelper(baseClass) {
    static get properties() {
      return {
        // True if you can upload more than one file at a time
        endpointAcceptsMulti: {
          type: Boolean,
          value: false
        },
        cancelUpload: {
          type: Boolean,
          value: false
        }

      }
    }

    uploadMulti(rawFile, index) {
      let options = {
      method: 'POST',
      url: this.uploadEndpoint,
      body: this._prepareBody(rawFile)
    };
    return this.sendRequest(options)
           .then((response) => {
             this.activeXhrRequest = null;
             if (index !== undefined) {
               response.myIndex = index;
             }
             return response;
           }).catch((error) => {
            if (index !== undefined) {
               response.myIndex = index;
             }
             this.activeXhrRequest = null;
             throw error;
           })
    }

  }
